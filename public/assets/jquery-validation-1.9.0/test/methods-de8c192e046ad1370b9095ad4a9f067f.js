!function(e){function t(t){var n=jQuery("#form").validate(),r=e.validator.methods[t],i=e("#firstname")[0];return function(e,t){return i.value=e,r.call(n,e,i,t)}}function n(t,n,r){e("#cardnumber").val(t);var i=e("#ccform").valid();equals(i,r,e.format("Expect card number {0} to validate to {1}, actually validated to ",t,r))}module("methods"),test("default messages",function(){var t=e.validator.methods;e.each(t,function(e){ok(jQuery.validator.messages[e],e+" has a default message.")})}),test("digit",function(){var e=t("digits");ok(e("123"),"Valid digits"),ok(!e("123.000"),"Invalid digits"),ok(!e("123.000,00"),"Invalid digits"),ok(!e("123.0.0,0"),"Invalid digits"),ok(!e("x123"),"Invalid digits"),ok(!e("100.100,0,0"),"Invalid digits")}),test("url",function(){var e=t("url");ok(e("http://bassistance.de/jquery/plugin.php?bla=blu"),"Valid url"),ok(e("https://bassistance.de/jquery/plugin.php?bla=blu"),"Valid url"),ok(e("ftp://bassistance.de/jquery/plugin.php?bla=blu"),"Valid url"),ok(e("http://www.føtex.dk/"),"Valid url, danish unicode characters"),ok(e("http://bösendorfer.de/"),"Valid url, german unicode characters"),ok(e("http://192.168.8.5"),"Valid IP Address"),ok(!e("http://192.168.8."),"Invalid IP Address"),ok(!e("http://bassistance"),"Invalid url"),ok(!e("http://bassistance."),"Invalid url"),ok(!e("http://bassistance,de"),"Invalid url"),ok(!e("http://bassistance;de"),"Invalid url"),ok(!e("http://.bassistancede"),"Invalid url"),ok(!e("bassistance.de"),"Invalid url")}),test("url2 (tld optional)",function(){var e=t("url2");ok(e("http://bassistance.de/jquery/plugin.php?bla=blu"),"Valid url"),ok(e("https://bassistance.de/jquery/plugin.php?bla=blu"),"Valid url"),ok(e("ftp://bassistance.de/jquery/plugin.php?bla=blu"),"Valid url"),ok(e("http://www.føtex.dk/"),"Valid url, danish unicode characters"),ok(e("http://bösendorfer.de/"),"Valid url, german unicode characters"),ok(e("http://192.168.8.5"),"Valid IP Address"),ok(!e("http://192.168.8."),"Invalid IP Address"),ok(e("http://bassistance"),"Invalid url"),ok(e("http://bassistance."),"Invalid url"),ok(!e("http://bassistance,de"),"Invalid url"),ok(!e("http://bassistance;de"),"Invalid url"),ok(!e("http://.bassistancede"),"Invalid url"),ok(!e("bassistance.de"),"Invalid url")}),test("email",function(){var e=t("email");ok(e("name@domain.tld"),"Valid email"),ok(e("name@domain.tl"),"Valid email"),ok(e("bart+bart@tokbox.com"),"Valid email"),ok(e("bart+bart@tokbox.travel"),"Valid email"),ok(e("n@d.tld"),"Valid email"),ok(e("ole@føtex.dk"),"Valid email"),ok(e("jörn@bassistance.de"),"Valid email"),ok(e("bla.blu@g.mail.com"),"Valid email"),ok(e('"Scott Gonzalez"@example.com'),"Valid email"),ok(e('"Scott González"@example.com'),"Valid email"),ok(e('"name."@domain.tld'),"Valid email"),ok(e('"name,"@domain.tld'),"Valid email"),ok(e('"name;"@domain.tld'),"Valid email"),ok(!e("name"),"Invalid email"),ok(!e("name@"),"Invalid email"),ok(!e("name@domain"),"Invalid email"),ok(!e("name.@domain.tld"),"Invalid email"),ok(!e("name,@domain.tld"),"Invalid email"),ok(!e("name;@domain.tld"),"Invalid email"),ok(!e("name;@domain.tld."),"Invalid email")}),test("email2 (tld optional)",function(){var e=t("email2");ok(e("name@domain.tld"),"Valid email"),ok(e("name@domain.tl"),"Valid email"),ok(e("bart+bart@tokbox.com"),"Valid email"),ok(e("bart+bart@tokbox.travel"),"Valid email"),ok(e("n@d.tld"),"Valid email"),ok(e("ole@føtex.dk"),"Valid email"),ok(e("jörn@bassistance.de"),"Valid email"),ok(e("bla.blu@g.mail.com"),"Valid email"),ok(e('"Scott Gonzalez"@example.com'),"Valid email"),ok(e('"Scott González"@example.com'),"Valid email"),ok(e('"name."@domain.tld'),"Valid email"),ok(e('"name,"@domain.tld'),"Valid email"),ok(e('"name;"@domain.tld'),"Valid email"),ok(!e("name"),"Invalid email"),ok(!e("name@"),"Invalid email"),ok(e("name@domain"),"Invalid email"),ok(!e("name.@domain.tld"),"Invalid email"),ok(!e("name,@domain.tld"),"Invalid email"),ok(!e("name;@domain.tld"),"Invalid email")}),test("number",function(){var e=t("number");ok(e("123"),"Valid number"),ok(e("-123"),"Valid number"),ok(e("123,000"),"Valid number"),ok(e("-123,000"),"Valid number"),ok(e("123,000.00"),"Valid number"),ok(e("-123,000.00"),"Valid number"),ok(!e("123.000,00"),"Invalid number"),ok(!e("123.0.0,0"),"Invalid number"),ok(!e("x123"),"Invalid number"),ok(!e("100.100,0,0"),"Invalid number"),ok(e(""),"Blank is valid"),ok(e("123"),"Valid decimal"),ok(e("123000"),"Valid decimal"),ok(e("123000.12"),"Valid decimal"),ok(e("-123000.12"),"Valid decimal"),ok(e("123.000"),"Valid decimal"),ok(e("123,000.00"),"Valid decimal"),ok(e("-123,000.00"),"Valid decimal"),ok(!e("1230,000.00"),"Invalid decimal"),ok(!e("123.0.0,0"),"Invalid decimal"),ok(!e("x123"),"Invalid decimal"),ok(!e("100.100,0,0"),"Invalid decimal")}),test("date",function(){var e=t("date");ok(e("06/06/1990"),"Valid date"),ok(e("6/6/06"),"Valid date"),ok(!e("1990x-06-06"),"Invalid date")}),test("dateISO",function(){var e=t("dateISO");ok(e("1990-06-06"),"Valid date"),ok(e("1990/06/06"),"Valid date"),ok(e("1990-6-6"),"Valid date"),ok(e("1990/6/6"),"Valid date"),ok(!e("1990-106-06"),"Invalid date"),ok(!e("190-06-06"),"Invalid date")}),test("required",function(){var t=jQuery("#form").validate(),n=e.validator.methods.required,r=e("#text1, #text1b, #hidden2, #select1, #select2");ok(n.call(t,r[0].value,r[0]),"Valid text input"),ok(!n.call(t,r[1].value,r[1]),"Invalid text input"),ok(!n.call(t,r[1].value,r[2]),"Invalid text input"),ok(!n.call(t,r[2].value,r[3]),"Invalid select"),ok(n.call(t,r[3].value,r[4]),"Valid select"),r=e("#area1, #area2, #pw1, #pw2"),ok(n.call(t,r[0].value,r[0]),"Valid textarea"),ok(!n.call(t,r[1].value,r[1]),"Invalid textarea"),ok(n.call(t,r[2].value,r[2]),"Valid password input"),ok(!n.call(t,r[3].value,r[3]),"Invalid password input"),r=e("#radio1, #radio2, #radio3"),ok(!n.call(t,r[0].value,r[0]),"Invalid radio"),ok(n.call(t,r[1].value,r[1]),"Valid radio"),ok(n.call(t,r[2].value,r[2]),"Valid radio"),r=e("#check1, #check2"),ok(n.call(t,r[0].value,r[0]),"Valid checkbox"),ok(!n.call(t,r[1].value,r[1]),"Invalid checkbox"),r=e("#select1, #select2, #select3, #select4"),ok(!n.call(t,r[0].value,r[0]),"Invalid select"),ok(n.call(t,r[1].value,r[1]),"Valid select"),ok(n.call(t,r[2].value,r[2]),"Valid select"),ok(n.call(t,r[3].value,r[3]),"Valid select")}),test("required with dependencies",function(){var t=jQuery("#form").validate(),n=e.validator.methods.required,r=e("#hidden2, #select1, #area2, #radio1, #check2");ok(n.call(t,r[0].value,r[0],"asffsaa"),"Valid text input due to depencie not met"),ok(!n.call(t,r[0].value,r[0],"input"),"Invalid text input"),ok(n.call(t,r[0].value,r[0],function(){return!1}),"Valid text input due to depencie not met"),ok(!n.call(t,r[0].value,r[0],function(){return!0}),"Invalid text input"),ok(n.call(t,r[1].value,r[1],"asfsfa"),"Valid select due to dependency not met"),ok(!n.call(t,r[1].value,r[1],"input"),"Invalid select"),ok(n.call(t,r[2].value,r[2],"asfsafsfa"),"Valid textarea due to dependency not met"),ok(!n.call(t,r[2].value,r[2],"input"),"Invalid textarea"),ok(n.call(t,r[3].value,r[3],"asfsafsfa"),"Valid radio due to dependency not met"),ok(!n.call(t,r[3].value,r[3],"input"),"Invalid radio"),ok(n.call(t,r[4].value,r[4],"asfsafsfa"),"Valid checkbox due to dependency not met"),ok(!n.call(t,r[4].value,r[4],"input"),"Invalid checkbox")}),test("minlength",function(){var t=jQuery("#form").validate(),n=e.validator.methods.minlength,r=2,i=e("#text1, #text1c, #text2, #text3");ok(n.call(t,i[0].value,i[0],r),"Valid text input"),ok(!n.call(t,i[1].value,i[1],r),"Invalid text input"),ok(!n.call(t,i[2].value,i[2],r),"Invalid text input"),ok(n.call(t,i[3].value,i[3],r),"Valid text input"),i=e("#check1, #check2, #check3"),ok(!n.call(t,i[0].value,i[0],r),"Valid checkbox"),ok(n.call(t,i[1].value,i[1],r),"Valid checkbox"),ok(n.call(t,i[2].value,i[2],r),"Invalid checkbox"),i=e("#select1, #select2, #select3, #select4, #select5"),ok(n.call(t,i[0].value,i[0],r),"Valid select "+i[0].id),ok(!n.call(t,i[1].value,i[1],r),"Invalid select "+i[1].id),ok(n.call(t,i[2].value,i[2],r),"Valid select "+i[2].id),ok(n.call(t,i[3].value,i[3],r),"Valid select "+i[3].id),ok(n.call(t,i[4].value,i[4],r),"Valid select "+i[4].id)}),test("maxlength",function(){var t=jQuery("#form").validate(),n=e.validator.methods.maxlength,r=4,i=e("#text1, #text2, #text3");ok(n.call(t,i[0].value,i[0],r),"Valid text input"),ok(n.call(t,i[1].value,i[1],r),"Valid text input"),ok(!n.call(t,i[2].value,i[2],r),"Invalid text input"),i=e("#check1, #check2, #check3"),ok(n.call(t,i[0].value,i[0],r),"Valid checkbox"),ok(n.call(t,i[1].value,i[1],r),"Invalid checkbox"),ok(!n.call(t,i[2].value,i[2],r),"Invalid checkbox"),i=e("#select1, #select2, #select3, #select4"),ok(n.call(t,i[0].value,i[0],r),"Valid select"),ok(n.call(t,i[1].value,i[1],r),"Valid select"),ok(n.call(t,i[2].value,i[2],r),"Valid select"),ok(!n.call(t,i[3].value,i[3],r),"Invalid select")}),test("rangelength",function(){var t=jQuery("#form").validate(),n=e.validator.methods.rangelength,r=[2,4],i=e("#text1, #text2, #text3");ok(n.call(t,i[0].value,i[0],r),"Valid text input"),ok(!n.call(t,i[1].value,i[1],r),"Invalid text input"),ok(!n.call(t,i[2].value,i[2],r),"Invalid text input")}),test("min",function(){var t=jQuery("#form").validate(),n=e.validator.methods.min,r=8,i=e("#value1, #value2, #value3");ok(!n.call(t,i[0].value,i[0],r),"Invalid text input"),ok(n.call(t,i[1].value,i[1],r),"Valid text input"),ok(n.call(t,i[2].value,i[2],r),"Valid text input")}),test("max",function(){var t=jQuery("#form").validate(),n=e.validator.methods.max,r=12,i=e("#value1, #value2, #value3");ok(n.call(t,i[0].value,i[0],r),"Valid text input"),ok(n.call(t,i[1].value,i[1],r),"Valid text input"),ok(!n.call(t,i[2].value,i[2],r),"Invalid text input")}),test("range",function(){var t=jQuery("#form").validate(),n=e.validator.methods.range,r=[4,12],i=e("#value1, #value2, #value3");ok(!n.call(t,i[0].value,i[0],r),"Invalid text input"),ok(n.call(t,i[1].value,i[1],r),"Valid text input"),ok(!n.call(t,i[2].value,i[2],r),"Invalid text input")}),test("equalTo",function(){var t=jQuery("#form").validate(),n=e.validator.methods.equalTo,r=e("#text1, #text2");ok(n.call(t,"Test",r[0],"#text1"),"Text input"),ok(n.call(t,"T",r[1],"#text2"),"Another one")}),test("creditcard",function(){var e=t("creditcard");ok(e("446-667-651"),"Valid creditcard number"),ok(e("446 667 651"),"Valid creditcard number"),ok(!e("asdf"),"Invalid creditcard number")}),test("accept",function(){var n=t("accept");ok(n("picture.gif"),"Valid default accept type"),ok(n("picture.jpg"),"Valid default accept type"),ok(n("picture.jpeg"),"Valid default accept type"),ok(n("picture.png"),"Valid default accept type"),ok(!n("picture.pgn"),"Invalid default accept type");var r=jQuery("#form").validate(),n=function(t,n){return e.validator.methods.accept.call(r,t,e("#text1")[0],n)};ok(n("picture.doc","doc"),"Valid custom accept type"),ok(n("picture.pdf","doc|pdf"),"Valid custom accept type"),ok(n("picture.pdf","pdf|doc"),"Valid custom accept type"),ok(!n("picture.pdf","doc"),"Invalid custom accept type"),ok(!n("picture.doc","pdf"),"Invalid custom accept type"),ok(n("picture.pdf","doc,pdf"),"Valid custom accept type, comma seperated"),ok(n("picture.pdf","pdf,doc"),"Valid custom accept type, comma seperated"),ok(!n("picture.pdf","gop,top"),"Invalid custom accept type, comma seperated")}),test("remote",function(){expect(7),stop();var t=e("#username"),n=e("#userForm").validate({rules:{username:{required:!0,remote:"users.php"}},messages:{username:{required:"Please",remote:jQuery.validator.format("{0} in use")}},submitHandler:function(){ok(!1,"submitHandler may never be called when validating only elements")}});e(document).ajaxStop(function(){e(document).unbind("ajaxStop"),equals(1,n.size(),"There must be one error"),equals("Peter in use",n.errorList[0].message),e(document).ajaxStop(function(){e(document).unbind("ajaxStop"),equals(1,n.size(),"There must be one error"),equals("Peter2 in use",n.errorList[0].message),start()}),t.val("Peter2"),ok(!n.element(t),"new value, new request")}),ok(!n.element(t),"invalid element, nothing entered yet"),t.val("Peter"),ok(!n.element(t),"still invalid, because remote validation must block until it returns")}),test("remote, customized ajax options",function(){expect(2),stop();e("#userForm").validate({rules:{username:{required:!0,remote:{url:"users.php",type:"POST",beforeSend:function(e,t){same(t.type,"POST"),same(t.data,"username=asdf&email=email.com")},data:{email:function(){return"email.com"}},complete:function(){start()}}}}});e("#username").val("asdf"),e("#userForm").valid()}),test("remote extensions",function(){expect(5),stop();var t=e("#username"),n=e("#userForm").validate({rules:{username:{required:!0,remote:"users2.php"}},messages:{username:{required:"Please"}},submitHandler:function(){ok(!1,"submitHandler may never be called when validating only elements")}});e(document).ajaxStop(function(){e(document).unbind("ajaxStop"),equals(1,n.size(),"There must be one error"),equals(n.errorList[0].message,"asdf is already taken, please try something else"),n.element(t),equals(n.errorList[0].message,"asdf is already taken, please try something else","message doesn't change on revalidation"),start()}),ok(!n.element(t),"invalid element, nothing entered yet"),t.val("asdf"),ok(!n.element(t),"still invalid, because remote validation must block until it returns")}),module("additional methods"),test("phone (us)",function(){var e=t("phoneUS");ok(e("1(212)-999-2345"),"Valid us phone number"),ok(e("212 999 2344"),"Valid us phone number"),ok(e("212-999-0983"),"Valid us phone number"),ok(!e("111-123-5434"),"Invalid us phone number"),ok(!e("212 123 4567"),"Invalid us phone number")}),test("dateITA",function(){var e=t("dateITA");ok(e("01/01/1900"),"Valid date ITA"),ok(!e("01/13/1990"),"Invalid date ITA"),ok(!e("01.01.1900"),"Invalid date ITA")}),test("time",function(){var e=t("time");ok(e("00:00"),"Valid time, lower bound"),ok(e("23:59"),"Valid time, upper bound"),ok(!e("00:60"),"Invalid time"),ok(!e("24:60"),"Invalid time"),ok(!e("24:00"),"Invalid time"),ok(!e("29:59"),"Invalid time"),ok(!e("30:00"),"Invalid time")}),test("time12h",function(){var e=t("time12h");ok(e("12:00 AM"),"Valid time, lower bound, am"),ok(e("11:59 AM"),"Valid time, upper bound, am"),ok(e("12:00 PM"),"Valid time, lower bound, pm"),ok(e("11:59 PM"),"Valid time, upper bound, pm"),ok(e("11:59 am"),"Valid time, also accept lowercase"),ok(e("11:59 pm"),"Valid time, also accept lowercase"),ok(!e("12:00"),"Invalid time"),ok(!e("12:61 am"),"Invalid time"),ok(!e("13:00 am"),"Invalid time")}),test("minWords",function(){var e=t("minWords");ok(e("hello worlds",2),"plain text, valid"),ok(e("<b>hello</b> world",2),"html, valid"),ok(!e("hello",2),"plain text, invalid"),ok(!e("<b>world</b>",2),"html, invalid"),ok(!e("world <br/>",2),"html, invalid")}),test("maxWords",function(){var e=t("maxWords");ok(e("hello",2),"plain text, valid"),ok(e("<b>world</b>",2),"html, valid"),ok(e("world <br/>",2),"html, valid"),ok(!e("hello worlds",2),"plain text, invalid"),ok(!e("<b>hello</b> world",2),"html, invalid")}),test("pattern",function(){var e=t("pattern");ok(e("AR1004",/^AR\d{4}$/),"Correct format for the given RegExp"),ok(!e("BR1004",/^AR\d{4}$/),"Invalid format for the given RegExp")}),test("creditcardtypes, all",function(){e("#ccform").validate({rules:{cardnumber:{creditcard:!0,creditcardtypes:{all:!0}}}}),n("4111-1111-1111-1111","VISA",!0),n("5111-1111-1111-1118","MasterCard",!0),n("6111-1111-1111-1116","Discover",!0),n("3400-0000-0000-009","AMEX",!0),n("4111-1111-1111-1110","VISA",!1),n("5432-1111-1111-1111","MasterCard",!1),n("6611-6611-6611-6611","Discover",!1),n("3777-7777-7777-7777","AMEX",!1)}),test("creditcardtypes, visa",function(){e("#ccform").validate({rules:{cardnumber:{creditcard:!0,creditcardtypes:{visa:!0}}}}),n("4111-1111-1111-1111","VISA",!0),n("5111-1111-1111-1118","MasterCard",!1),n("6111-1111-1111-1116","Discover",!1),n("3400-0000-0000-009","AMEX",!1)}),test("creditcardtypes, mastercard",function(){e("#ccform").validate({rules:{cardnumber:{creditcard:!0,creditcardtypes:{mastercard:!0}}}}),n("5111-1111-1111-1118","MasterCard",!0),n("6111-1111-1111-1116","Discover",!1),n("3400-0000-0000-009","AMEX",!1),n("4111-1111-1111-1111","VISA",!1)})}(jQuery);