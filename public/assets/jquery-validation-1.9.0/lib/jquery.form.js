!function(e){function t(){e.fn.ajaxSubmit.debug&&window.console&&window.console.log&&window.console.log("[jquery.form] "+Array.prototype.join.call(arguments,""))}e.fn.ajaxSubmit=function(n){function r(){function r(){if(!p++){d.detachEvent?d.detachEvent("onload",r):d.removeEventListener("load",r,!1);var n=!0;try{if(m)throw"timeout";var a,s;s=d.contentWindow?d.contentWindow.document:d.contentDocument?d.contentDocument:d.document;var l="xml"==o.dataType||s.XMLDocument||e.isXMLDoc(s);if(t("isXml="+l),!l&&(null==s.body||""==s.body.innerHTML))return--y?(p=0,setTimeout(r,100),void 0):(t("Could not access iframe DOM after 50 tries."),void 0);if(f.responseText=s.body?s.body.innerHTML:null,f.responseXML=s.XMLDocument?s.XMLDocument:s,f.getResponseHeader=function(e){var t={"content-type":o.dataType};return t[e]},"json"==o.dataType||"script"==o.dataType){var u=s.getElementsByTagName("textarea")[0];if(u)f.responseText=u.value;else{var g=s.getElementsByTagName("pre")[0];g&&(f.responseText=g.innerHTML)}}else"xml"!=o.dataType||f.responseXML||null==f.responseText||(f.responseXML=i(f.responseText));a=e.httpData(f,o.dataType)}catch(v){n=!1,e.handleError(o,f,"error",v)}n&&(o.success(a,"success"),h&&e.event.trigger("ajaxSuccess",[f,o])),h&&e.event.trigger("ajaxComplete",[f,o]),h&&!--e.active&&e.event.trigger("ajaxStop"),o.complete&&o.complete(f,n?"success":"error"),setTimeout(function(){c.remove(),f.responseXML=null},100)}}function i(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.tagName?t:null}var a=u[0];if(e(":input[name=submit]",a).length)return alert('Error: Form elements must not be named "submit".'),void 0;var o=e.extend({},e.ajaxSettings,n),s=e.extend(!0,{},e.extend(!0,{},e.ajaxSettings),o),l="jqFormIO"+(new Date).getTime(),c=e('<iframe id="'+l+'" name="'+l+'" src="'+o.iframeSrc+'" />'),d=c[0];c.css({position:"absolute",top:"-1000px",left:"-1000px"});var f={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1,c.attr("src",o.iframeSrc)}},h=o.global;if(h&&!e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[f,o]),s.beforeSend&&s.beforeSend(f,s)===!1)return s.global&&e.active--,void 0;if(!f.aborted){var p=0,m=0,g=a.clk;if(g){var v=g.name;v&&!g.disabled&&(n.extraData=n.extraData||{},n.extraData[v]=g.value,"image"==g.type&&(n.extraData[name+".x"]=a.clk_x,n.extraData[name+".y"]=a.clk_y))}setTimeout(function(){var t=u.attr("target"),i=u.attr("action");a.setAttribute("target",l),"POST"!=a.getAttribute("method")&&a.setAttribute("method","POST"),a.getAttribute("action")!=o.url&&a.setAttribute("action",o.url),n.skipEncodingOverride||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),o.timeout&&setTimeout(function(){m=!0,r()},o.timeout);var s=[];try{if(n.extraData)for(var f in n.extraData)s.push(e('<input type="hidden" name="'+f+'" value="'+n.extraData[f]+'" />').appendTo(a)[0]);c.appendTo("body"),d.attachEvent?d.attachEvent("onload",r):d.addEventListener("load",r,!1),a.submit()}finally{a.setAttribute("action",i),t?a.setAttribute("target",t):u.removeAttr("target"),e(s).remove()}},10);var y=50}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof n&&(n={success:n});var i=e.trim(this.attr("action"));i&&(i=(i.match(/^([^#]+)/)||[])[1]),i=i||window.location.href||"",n=e.extend({url:i,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n||{});var a={};if(this.trigger("form-pre-serialize",[this,n,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var o=this.formToArray(n.semantic);if(n.data){n.extraData=n.data;for(var s in n.data)if(n.data[s]instanceof Array)for(var l in n.data[s])o.push({name:s,value:n.data[s][l]});else o.push({name:s,value:n.data[s]})}if(n.beforeSubmit&&n.beforeSubmit(o,this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[o,this,n,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var c=e.param(o);"GET"==n.type.toUpperCase()?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+c,n.data=null):n.data=c;var u=this,d=[];if(n.resetForm&&d.push(function(){u.resetForm()}),n.clearForm&&d.push(function(){u.clearForm()}),!n.dataType&&n.target){var f=n.success||function(){};d.push(function(t){e(n.target).html(t).each(f,arguments)})}else n.success&&d.push(n.success);n.success=function(e,t){for(var r=0,i=d.length;i>r;r++)d[r].apply(n,[e,t,u])};for(var h=e("input:file",this).fieldValue(),p=!1,m=0;m<h.length;m++)h[m]&&(p=!0);var g=!1;return h.length&&n.iframe!==!1||n.iframe||p||g?n.closeKeepAlive?e.get(n.closeKeepAlive,r):r():e.ajax(n),this.trigger("form-submit-notify",[this,n]),this},e.fn.ajaxForm=function(t){return this.ajaxFormUnbind().bind("submit.form-plugin",function(){return e(this).ajaxSubmit(t),!1}).bind("click.form-plugin",function(t){var n=t.target,r=e(n);if(!r.is(":submit,input:image")){var i=r.closest(":submit");if(0==i.length)return;n=i[0]}var a=this;if(a.clk=n,"image"==n.type)if(void 0!=t.offsetX)a.clk_x=t.offsetX,a.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=r.offset();a.clk_x=t.pageX-o.left,a.clk_y=t.pageY-o.top}else a.clk_x=t.pageX-n.offsetLeft,a.clk_y=t.pageY-n.offsetTop;setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var n=[];if(0==this.length)return n;var r=this[0],i=t?r.getElementsByTagName("*"):r.elements;if(!i)return n;for(var a=0,o=i.length;o>a;a++){var s=i[a],l=s.name;if(l)if(t&&r.clk&&"image"==s.type)s.disabled||r.clk!=s||(n.push({name:l,value:e(s).val()}),n.push({name:l+".x",value:r.clk_x},{name:l+".y",value:r.clk_y}));else{var c=e.fieldValue(s,!0);if(c&&c.constructor==Array)for(var u=0,d=c.length;d>u;u++)n.push({name:l,value:c[u]});else null!==c&&"undefined"!=typeof c&&n.push({name:l,value:c})}}if(!t&&r.clk){var f=e(r.clk),h=f[0],l=h.name;l&&!h.disabled&&"image"==h.type&&(n.push({name:l,value:f.val()}),n.push({name:l+".x",value:r.clk_x},{name:l+".y",value:r.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(r){var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var a=0,o=i.length;o>a;a++)n.push({name:r,value:i[a]});else null!==i&&"undefined"!=typeof i&&n.push({name:this.name,value:i})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;i>r;r++){var a=this[r],o=e.fieldValue(a,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(n,o):n.push(o))}return n},e.fieldValue=function(e,t){var n=e.name,r=e.type,i=e.tagName.toLowerCase();if("undefined"==typeof t&&(t=!0),t&&(!n||e.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!e.checked||("submit"==r||"image"==r)&&e.form&&e.form.clk!=e||"select"==i&&-1==e.selectedIndex))return null;if("select"==i){var a=e.selectedIndex;if(0>a)return null;for(var o=[],s=e.options,l="select-one"==r,c=l?a+1:s.length,u=l?a:0;c>u;u++){var d=s[u];if(d.selected){var f=d.value;if(f||(f=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),l)return f;o.push(f)}}return o}return e.value},e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})},e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0==e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0==t&&(t=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var r=e(this).parent("select");t&&r[0]&&"select-one"==r[0].type&&r.find("option").selected(!1),this.selected=t}})}}(jQuery);