function Key(e,t,n,r,a,i,o,s,c,l){function u(){switch(ctx.strokeStyle="black",i){case"circle":h();break;case"circle-key":h();break;case"half-circle":d(1,1);break;case"half-circle-flat":d(1.25,.75);break;case"oval-small":f(.75,.5);break;case"oval-med":f(1,.5);break;case"oval-large":f(1.5,.5);break;case"box-up-left-curve":p();break;case"box-right-end-curve":m();break;default:alert("Error: Key.draw("+i+").")}}function f(e,i){switch(ctx.save(),ctx.translate(t,n),ctx.rotate(a),ctx.scale(e,i),ctx.beginPath(),ctx.arc(0,0,r,0,2*Math.PI,!1),parseInt(o)){case 5:ctx.moveTo(-r*Math.cos(1.75*Math.PI),-r*Math.sin(1.75*Math.PI)),ctx.lineTo(-r*Math.cos(.75*Math.PI),-r*Math.sin(.75*Math.PI)),ctx.moveTo(-r*Math.cos(1.65*Math.PI),-r*Math.sin(1.65*Math.PI)),ctx.lineTo(-r*Math.cos(.85*Math.PI),-r*Math.sin(.85*Math.PI)),ctx.moveTo(-r*Math.cos(1.55*Math.PI),-r*Math.sin(1.55*Math.PI)),ctx.lineTo(-r*Math.cos(.95*Math.PI),-r*Math.sin(.95*Math.PI)),ctx.moveTo(-r*Math.cos(1.85*Math.PI),-r*Math.sin(1.85*Math.PI)),ctx.lineTo(-r*Math.cos(.65*Math.PI),-r*Math.sin(.65*Math.PI)),ctx.moveTo(-r*Math.cos(1.95*Math.PI),-r*Math.sin(1.95*Math.PI)),ctx.lineTo(-r*Math.cos(.55*Math.PI),-r*Math.sin(.55*Math.PI));break;case 6:ctx.moveTo(-r*Math.cos(1.25*Math.PI),-r*Math.sin(1.25*Math.PI)),ctx.lineTo(-r*Math.cos(.25*Math.PI),-r*Math.sin(.25*Math.PI)),ctx.moveTo(-r*Math.cos(1.75*Math.PI),-r*Math.sin(1.75*Math.PI)),ctx.lineTo(-r*Math.cos(.75*Math.PI),-r*Math.sin(.75*Math.PI))}ctx.closePath(),ctx.scale(i,e),1==o&&(ctx.fillStyle="#333333",ctx.fill()),b&&(ctx.strokeStyle="red"),ctx.stroke(),ctx.restore()}function h(){switch(ctx.save(),ctx.translate(t,n),ctx.beginPath(),ctx.arc(0,0,r,0,2*Math.PI,!1),parseInt(o)){case 5:ctx.moveTo(-r*Math.cos(1.75*Math.PI),-r*Math.sin(1.75*Math.PI)),ctx.lineTo(-r*Math.cos(.75*Math.PI),-r*Math.sin(.75*Math.PI)),ctx.moveTo(-r*Math.cos(1.65*Math.PI),-r*Math.sin(1.65*Math.PI)),ctx.lineTo(-r*Math.cos(.85*Math.PI),-r*Math.sin(.85*Math.PI)),ctx.moveTo(-r*Math.cos(1.55*Math.PI),-r*Math.sin(1.55*Math.PI)),ctx.lineTo(-r*Math.cos(.95*Math.PI),-r*Math.sin(.95*Math.PI)),ctx.moveTo(-r*Math.cos(1.85*Math.PI),-r*Math.sin(1.85*Math.PI)),ctx.lineTo(-r*Math.cos(.65*Math.PI),-r*Math.sin(.65*Math.PI)),ctx.moveTo(-r*Math.cos(1.95*Math.PI),-r*Math.sin(1.95*Math.PI)),ctx.lineTo(-r*Math.cos(.55*Math.PI),-r*Math.sin(.55*Math.PI));break;case 6:ctx.moveTo(-r*Math.cos(1.25*Math.PI),-r*Math.sin(1.25*Math.PI)),ctx.lineTo(-r*Math.cos(.25*Math.PI),-r*Math.sin(.25*Math.PI)),ctx.moveTo(-r*Math.cos(1.75*Math.PI),-r*Math.sin(1.75*Math.PI)),ctx.lineTo(-r*Math.cos(.75*Math.PI),-r*Math.sin(.75*Math.PI))}if(ctx.closePath(),o>=1&&4>=o&&(ctx.fillStyle="#333333",ctx.fill()),b&&(ctx.strokeStyle="red"),ctx.stroke(),o>=2&&4>=o){switch(ctx.beginPath(),parseInt(o)){case 2:ctx.arc(0,0,r,1.25*Math.PI,1.75*Math.PI,!1),ctx.lineTo(0,0),ctx.lineTo(-r*Math.cos(.25*Math.PI),-r*Math.sin(.75*Math.PI));break;case 3:ctx.arc(0,0,r,0,Math.PI,!0),ctx.moveTo(-r,0),ctx.lineTo(r,0);break;case 4:ctx.arc(0,0,r,.25*Math.PI,.75*Math.PI,!0),ctx.lineTo(0,0),ctx.lineTo(-r*Math.cos(1.25*Math.PI),-r*Math.sin(1.75*Math.PI))}ctx.closePath(),ctx.fillStyle="white",ctx.fill(),ctx.stroke()}ctx.restore()}function d(e,i){switch(ctx.save(),ctx.translate(t,n),ctx.rotate(a),ctx.scale(e,i),ctx.beginPath(),ctx.arc(0,0,r,0,Math.PI,!1),ctx.moveTo(-r,0),ctx.lineTo(r,0),parseInt(o)){case 5:ctx.moveTo(-r*Math.cos(1.75*Math.PI),-r*Math.sin(1.75*Math.PI)),ctx.lineTo(r-5,r*Math.sin(Math.PI)),ctx.moveTo(-r*Math.cos(1.65*Math.PI),-r*Math.sin(1.65*Math.PI)),ctx.lineTo(r,r*Math.sin(Math.PI)),ctx.moveTo(-r*Math.cos(1.85*Math.PI),-r*Math.sin(1.85*Math.PI)),ctx.lineTo(r-10,r*Math.sin(Math.PI)),ctx.moveTo(-r*Math.cos(1.55*Math.PI),-r*Math.sin(1.55*Math.PI)),ctx.lineTo(r,r*Math.sin(.1*Math.PI));break;case 6:ctx.moveTo(-r*Math.cos(1.25*Math.PI),-r*Math.sin(1.25*Math.PI)),ctx.lineTo(-r,-r*Math.sin(Math.PI)),ctx.moveTo(-r*Math.cos(1.75*Math.PI),-r*Math.sin(1.75*Math.PI)),ctx.lineTo(r,r*Math.sin(Math.PI))}ctx.closePath(),ctx.scale(i,e),1==o&&(ctx.fillStyle="#333333",ctx.fill()),b&&(ctx.strokeStyle="red"),ctx.stroke(),ctx.restore()}function p(){switch(ctx.save(),ctx.translate(t,n),ctx.rotate(a),ctx.beginPath(),ctx.arc(0,0,r,-(180*Math.PI)/180,-(100*Math.PI)/180,!1),ctx.lineTo(10,-8),ctx.lineTo(6,4),ctx.lineTo(-10,4),ctx.lineTo(-10,0),parseInt(o)){case 5:ctx.moveTo(10,-8),ctx.lineTo(-10,4),ctx.moveTo(6,-9),ctx.lineTo(-10,0),ctx.moveTo(1,-9),ctx.lineTo(-9,-4),ctx.moveTo(8.5,-3.5),ctx.lineTo(-5,4);break;case 6:ctx.moveTo(10,-8),ctx.lineTo(-10,4),ctx.moveTo(6,4),ctx.lineTo(-7,-8)}ctx.closePath(),1==o&&(ctx.fillStyle="#333333",ctx.fill()),b&&(ctx.strokeStyle="red"),ctx.stroke(),ctx.restore()}function m(){switch(ctx.save(),ctx.translate(t,n),ctx.rotate(a),ctx.beginPath(),ctx.moveTo(-10,4.5),ctx.lineTo(-7,-7),ctx.lineTo(6,-5),ctx.arc(4.5,0,r,-(90*Math.PI)/180,90*Math.PI/180,!1),ctx.lineTo(-10,4.5),parseInt(o)){case 5:ctx.moveTo(-10,5),ctx.lineTo(9,-3.5),ctx.moveTo(-3,5),ctx.lineTo(9,0),ctx.moveTo(-9,.5),ctx.lineTo(6,-5),ctx.moveTo(-8,-3),ctx.lineTo(0,-5.5);break;case 6:ctx.moveTo(-7,-7),ctx.lineTo(9,3.5),ctx.moveTo(-10,5),ctx.lineTo(9,-3.5)}ctx.closePath(),1==o&&(ctx.fillStyle="#333333",ctx.fill()),b&&(ctx.strokeStyle="red"),ctx.stroke(),ctx.restore()}function g(){u(),"show"!=l&&v()}function v(){if(b=!1,"oval-small"==i||"oval-med"==i||"oval-large"==i){var o=r*Math.cos(0)*scale_X,l=r*Math.sin(Math.PI/2)*scale_Y;switch(i){case"oval-small":o*=.75,l*=.5;break;case"oval-med":o*=1,l*=.5;break;case"oval-large":o*=1.5,l*=.5}var u=(mouse_X-(t+s)*scale_X)*Math.cos(a)+(mouse_Y-(n+c)*scale_Y)*Math.sin(a),f=-(mouse_X-(t+s)*scale_X)*Math.sin(a)+(mouse_Y-(n+c)*scale_Y)*Math.cos(a);1>=u*u/(o*o)+f*f/(l*l)&&(b=!0)}else if("half-circle"==i||"half-circle-flat"==i){var h=r*Math.sqrt(scale_X*scale_X+scale_Y*scale_Y)*.7,d=(-h*Math.cos(a),-h*Math.sin(a),h*Math.cos(a)),p=h*Math.sin(a),m=d-(t+s)*scale_X,g=p-(n+c)*scale_Y,v=mouse_X-(t+s)*scale_X,x=mouse_Y-(n+c)*scale_Y;prod=m*x-g*v,0>=a&&a>-Math.PI||a==-(300*Math.PI)/180?0>=prod&&Math.sqrt(Math.pow((t+s)*scale_X-mouse_X,2)+Math.pow((n+c)*scale_Y-mouse_Y,2))<=h&&(b=!0):prod>=0&&Math.sqrt(Math.pow((t+s)*scale_X-mouse_X,2)+Math.pow((n+c)*scale_Y-mouse_Y,2))<=h&&(b=!0)}else{var y=(t+s)*scale_X-mouse_X,T=(n+c)*scale_Y-mouse_Y,w=r*Math.sqrt(Math.pow(scale_X,2)+Math.pow(scale_Y,2))*.7;w*w>=y*y+T*T&&(b=!0)}b&&""==pointer?pointer=e:b||pointer!=e||(pointer="")}function x(){if(b){switch(i){case"circle":o>=7&&(o=0),o+=1;break;default:switch(parseInt(o)){case 1:o=5;break;case 5:o=6;break;case 6:o=7;break;case 7:o=1}}return!0}}function y(){return String(o)}var b=!1;this.Update=g,this.OnClick=x,this.ToString=y}